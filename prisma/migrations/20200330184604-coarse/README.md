# Migration `20200330184604-coarse`

This migration has been generated by Mina Saleeb at 3/30/2020, 6:46:04 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `hds`.`EmployeeModel` (
    `id` int NOT NULL  AUTO_INCREMENT,
    `positionName` ENUM('PRESIDENT_CEO', 'VP_CEO', 'STORE_MANAGER', 'OFFICE_MANAGER', 'SALES_DESIGN_MANAGER', 'SALES_DESIGN_ASSOCIATE', 'SCHEDULING', 'TECHNICIAN', 'DELIVERY', 'WAREHOUSE', 'INSTALLATIONS') NOT NULL DEFAULT 'PRESIDENT_CEO' ,
    `roleCapability` ENUM('READ_WRITE', 'READ', 'WRITE', 'NONE') NOT NULL DEFAULT 'READ_WRITE' ,
    `salary` Decimal(65,30) NOT NULL DEFAULT 0 ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `hds`.`Employee` DROP FOREIGN KEY `employee_ibfk_1`;

ALTER TABLE `hds`.`Employee` ADD FOREIGN KEY (`employeePosition`) REFERENCES `hds`.`EmployeeModel`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE `hds`.`EmployeePosition`;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200330181114-salary..20200330184604-coarse
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource mysql {
   provider = "mysql"
-  url = "***"
+  url      = env("MYSQL_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -14,9 +14,9 @@
   WRITE
   NONE
 }
-enum EmployeePositions {
+enum PositionNames {
   PRESIDENT_CEO
   VP_CEO
   STORE_MANAGER
   OFFICE_MANAGER
@@ -28,28 +28,29 @@
   WAREHOUSE
   INSTALLATIONS
 }
-model EmployeePosition {
+// 1:1 with Employee
+model EmployeeModel {
   id        Int      @id @default(autoincrement())
-  positionName        EmployeePositions
+  positionName        PositionNames
   roleCapability      Role
   employeeId          Employee
   salary              Float
 }
 model Supplier {
-  id        Int      @id @default(autoincrement())
-  name      String
-  address   String
-  city      String
-  state     String
-  zip       Int
-  phone     String
-  email     String   @unique
+  id          Int         @id @default(autoincrement())
+  name        String
+  address     String
+  city        String
+  state       String
+  zip         Int
+  phone       String
+  email       String      @unique
   salesOrders SalesOrder[]
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  createdAt   DateTime    @default(now())
+  updatedAt   DateTime    @updatedAt
 }
 model Product {
   id              Int          @id @default(autoincrement())
@@ -84,24 +85,24 @@
   updatedAt DateTime @updatedAt
 }
 model Employee {
-  id            Int        @id @default(autoincrement())
-  locationId    Location   @relation(references: [id])
-  employeePosition   EmployeePosition
-  firstName     String
-  lastName      String
-  address       String
-  city          String
-  state         String
-  zip           Int
-  phone         String
-  email         String     @unique
-  password      String
-  jwtUserSecret String
-  magicCode     MagicCode?
-  createdAt     DateTime   @default(now())
-  updatedAt     DateTime   @updatedAt
+  id                 Int           @id @default(autoincrement())
+  locationId         Location      @relation(references: [id])
+  employeePosition   EmployeeModel
+  firstName          String
+  lastName           String
+  address            String
+  city               String
+  state              String
+  zip                Int
+  phone              String
+  email              String         @unique
+  password           String
+  jwtUserSecret      String
+  magicCode          MagicCode?
+  createdAt          DateTime       @default(now())
+  updatedAt          DateTime       @updatedAt
 }
 model Inventory {
   id         Int        @id @default(autoincrement())
```


