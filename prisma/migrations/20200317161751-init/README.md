# Migration `20200317161751-init`

This migration has been generated by Mina Saleeb at 3/17/2020, 4:17:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `hds`.`Location` ADD COLUMN `inventory` int  ;

ALTER TABLE `hds`.`Product` ADD COLUMN `customerOrder` int  ,
ADD COLUMN `inventory` int  ,
ADD COLUMN `productOrder` int  ;

ALTER TABLE `hds`.`ProductOrder` ;

ALTER TABLE `hds`.`Location` ADD FOREIGN KEY (`inventory`) REFERENCES `hds`.`Inventory`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `hds`.`Product` ADD FOREIGN KEY (`productOrder`) REFERENCES `hds`.`ProductOrder`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `hds`.`Product` ADD FOREIGN KEY (`inventory`) REFERENCES `hds`.`Inventory`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `hds`.`Product` ADD FOREIGN KEY (`customerOrder`) REFERENCES `hds`.`CustomerOrder`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `hds`.`Product` ADD FOREIGN KEY (`customerSale`) REFERENCES `hds`.`CustomerSale`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `hds`.`ProductOrder` ADD FOREIGN KEY (`supplierId`) REFERENCES `hds`.`Supplier`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200317161751-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,137 @@
+datasource mysql {
+  provider = "mysql"
+  url      = env("MYSQL_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+enum Role {
+  USER ADMIN
+}
+
+model Supplier {
+  id      Int    @id @default(autoincrement())
+  name    String
+  address String
+  city    String
+  state   String
+  zip     Int
+  phone   String
+  email   String @unique
+}
+
+model Product {
+  id              Int      @id @default(autoincrement())
+  modelNumber     Int
+  productCategory String
+  description     String
+  unitCost        Int
+  price           Int
+  createdAt       DateTime @default(now())
+  updatedAt       DateTime @updatedAt
+}
+
+// for relation def
+// @see https://github.com/prisma/prisma2/blob/master/docs/relations.md/#the-relation-attribute
+model ProductOrder {
+  id                Int       @id @default(autoincrement())
+  productId         Product[]
+  supplierId        Supplier
+  quantityPurchased Int
+  costEach          Int
+  extendedCost      Int
+  dueDate           DateTime  @default(now())
+}
+
+model Location {
+  id      Int    @id @default(autoincrement())
+  address String
+  city    String
+  state   String
+  zip     Int
+  phone   String
+}
+
+model Employee {
+  id         Int      @id @default(autoincrement())
+  locationId Location
+  role       Role     @default(USER)
+  name       String
+  address    String
+  city       String
+  state      String
+  zip        Int
+  phone      String
+  email      String   @unique
+}
+
+model Inventory {
+  id           Int        @id @default(autoincrement())
+  productId    Product[]
+  locationId   Location[]
+  aisle        Int
+  bin          String
+  serialNumber Int
+}
+
+
+model Customer {
+  id      Int    @id @default(autoincrement())
+  name    String
+  address String
+  city    String
+  state   String
+  zip     Int
+  phone   String
+  email   String @unique
+}
+
+model Job {
+  id             Int       @id @default(autoincrement())
+  customerId     Customer
+  startDate      DateTime  @default(now())
+  scheduledEnd   DateTime
+  scheduledHours Int
+  actualHours    Int?
+  actualEnd      DateTime?
+}
+
+// the id is composite of customerId and jobId
+model CustomerOrder {
+  id                Int       @id @default(autoincrement())
+  customerId        Customer
+  jobId             Job
+  productId         Product[]
+  orderDate         DateTime  @default(now())
+  requestedDate     DateTime
+  quantityPurchased Int
+  unitCost          Int
+  extendedCost      Int
+  dueDate           DateTime
+}
+
+model CustomerSale {
+  id              Int           @id @default(autoincrement())
+  customerId      Customer
+  customerOrderId CustomerOrder
+  productId       Product[]
+  saleDate        DateTime      @default(now())
+  saleAmount      Int
+}
+
+model Bid {
+  id            Int      @id @default(autoincrement())
+  customerId    Customer
+  requiredHours Int
+  bidAmount     Int
+}
+
+model BidProduct {
+  id         String   @id @default(uuid())
+  bidId      Bid
+  productId  Product
+  saleDate   DateTime @default(now())
+  saleAmount Int
+}
```


