# Migration `20200330201149-employee-position`

This migration has been generated by Mina Saleeb at 3/30/2020, 8:11:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `hds`.`EmployeePosition` (
    `id` int NOT NULL  AUTO_INCREMENT,
    `positionName` ENUM('PRESIDENT_CEO', 'VP_CEO', 'STORE_MANAGER', 'OFFICE_MANAGER', 'SALES_DESIGN_MANAGER', 'SALES_DESIGN_ASSOCIATE', 'SCHEDULING', 'TECHNICIAN', 'DELIVERY', 'WAREHOUSE', 'INSTALLATIONS') NOT NULL DEFAULT 'PRESIDENT_CEO' ,
    `roleCapability` ENUM('READ_WRITE', 'READ', 'WRITE', 'NONE') NOT NULL DEFAULT 'READ_WRITE' ,
    `salary` Decimal(65,30) NOT NULL DEFAULT 0 ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `hds`.`Employee` DROP FOREIGN KEY `employee_ibfk_4`;

ALTER TABLE `hds`.`Employee` ADD FOREIGN KEY (`employeePosition`) REFERENCES `hds`.`EmployeePosition`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE `hds`.`EmployeeModel`;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200330200115-init..20200330201149-employee-position
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource mysql {
   provider = "mysql"
-  url = "***"
+  url      = env("MYSQL_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -29,9 +29,9 @@
   INSTALLATIONS
 }
 // 1:1 with Employee
-model EmployeeModel {
+model EmployeePosition {
   id                  Int            @id @default(autoincrement())
   positionName        PositionNames
   roleCapability      Role
   employeeId          Employee
@@ -87,9 +87,9 @@
 model Employee {
   id                 Int           @id @default(autoincrement())
   locationId         Location      @relation(references: [id])
-  employeePosition   EmployeeModel
+  employeePosition   EmployeePosition
   firstName          String
   lastName           String
   address            String
   city               String
```


