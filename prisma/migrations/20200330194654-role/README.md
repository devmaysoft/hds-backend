# Migration `20200330194654-role`

This migration has been generated by Mina Saleeb at 3/30/2020, 7:46:54 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `hds`.`Employee` DROP FOREIGN KEY `employee_ibfk_4`,
DROP COLUMN `employeePosition`,
ADD COLUMN `employeeRoleId` int NOT NULL ;

CREATE UNIQUE INDEX `Employee_employeeRoleId` ON `hds`.`Employee`(`employeeRoleId`)

ALTER TABLE `hds`.`Employee` ADD FOREIGN KEY (`employeeRoleId`) REFERENCES `hds`.`EmployeeModel`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200330184604-coarse..20200330194654-role
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource mysql {
   provider = "mysql"
-  url = "***"
+  url      = env("MYSQL_URL")
 }
 generator client {
   provider      = "prisma-client-js"
@@ -30,9 +30,9 @@
 }
 // 1:1 with Employee
 model EmployeeModel {
-  id        Int      @id @default(autoincrement())
+  id                  Int            @id @default(autoincrement())
   positionName        PositionNames
   roleCapability      Role
   employeeId          Employee
   salary              Float
@@ -87,9 +87,9 @@
 model Employee {
   id                 Int           @id @default(autoincrement())
   locationId         Location      @relation(references: [id])
-  employeePosition   EmployeeModel
+  employeeRoleId     EmployeeModel
   firstName          String
   lastName           String
   address            String
   city               String
```


